# 租屋物件快速收集工具 - Chrome 擴充功能

這是一個瀏覽器擴充功能，讓您在瀏覽租屋網站時可以一鍵擷取物件資訊並自動加入到租賃物件聚合平台。

## 功能特色

- 🚀 **一鍵擷取** - 在租屋網站頁面上點擊擴充功能圖示即可擷取資料
- 🏠 **支援多個網站** - 支援 591 租屋網、信義房屋、永慶房仲等主流租屋網站
- 📊 **自動解析** - 自動解析地址、租金、房型、樓層、屋齡等資訊
- 🔄 **即時同步** - 擷取的資料即時同步到您的租賃物件聚合平台
- ⚙️ **簡單設定** - 只需設定一次 API 網址即可使用

## 安裝方式

### 方法一：開發者模式安裝（推薦）

1. 開啟 Chrome 瀏覽器
2. 在網址列輸入 `chrome://extensions/`
3. 開啟右上角的「開發人員模式」
4. 點擊「載入未封裝項目」
5. 選擇 `browser-extension` 資料夾
6. 擴充功能安裝完成！

### 方法二：打包安裝

1. 在 `chrome://extensions/` 頁面
2. 開啟「開發人員模式」
3. 點擊「封裝擴充功能」
4. 選擇 `browser-extension` 資料夾
5. 產生 `.crx` 檔案後拖曳到瀏覽器安裝

## 使用方式

### 1. 首次設定

1. 點擊瀏覽器工具列上的擴充功能圖示 🏠
2. 在「API 網址」欄位輸入您的租賃物件聚合平台網址
   - 例如：`https://your-domain.manus.space`
   - 或本地開發：`http://localhost:3000`
3. 點擊「設定」按鈕儲存

### 2. 擷取物件資料

1. 前往任一支援的租屋網站（591、信義、永慶）
2. 開啟您想要收集的物件詳細頁面
3. 點擊擴充功能圖示 🏠
4. 點擊「擷取資料」按鈕
5. 等待幾秒鐘，資料會自動加入到您的系統中
6. 看到「✓ 資料已成功加入系統！」訊息即表示完成

### 3. 查看收集的資料

1. 前往您的租賃物件聚合平台
2. 在物件列表中即可看到剛剛擷取的資料
3. 可以進一步編輯或管理這些物件

## 支援的網站

目前支援以下租屋網站：

- ✅ **591 租屋網** (`rent.591.com.tw`)
- ✅ **信義房屋** (`www.sinyi.com.tw`)
- ✅ **永慶房仲** (`www.yungching.com.tw`)

## 擷取的資料欄位

擴充功能會自動擷取以下資訊：

- 📍 **公寓網址** - 物件的原始網址
- 🏘️ **地址** - 完整地址
- 🗺️ **縣市** - 所在縣市
- 📌 **行政區** - 所在行政區
- 🏢 **樓層數** - 物件所在樓層
- 💰 **租金** - 每月租金
- 🛏️ **房間數** - 房型（幾房）
- 📅 **屋齡** - 建築年份
- 🛗 **電梯** - 是否有電梯
- 🚇 **捷運** - 鄰近捷運站
- 🌐 **來源** - 資料來源網站

## 技術架構

- **Manifest V3** - 使用最新的 Chrome 擴充功能規範
- **Content Scripts** - 在租屋網站頁面上執行資料擷取
- **Background Service Worker** - 處理背景任務
- **Chrome Storage API** - 儲存使用者設定
- **Fetch API** - 與後端 API 通訊

## 開發說明

### 檔案結構

```
browser-extension/
├── manifest.json       # 擴充功能配置檔
├── popup.html         # 彈出視窗介面
├── popup.js           # 彈出視窗邏輯
├── content.js         # 內容腳本（在網頁上執行）
├── background.js      # 背景服務
├── icons/             # 圖示資源
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── README.md          # 說明文件
```

### 修改資料擷取邏輯

如果需要調整資料擷取的邏輯，請編輯 `popup.js` 中的以下函數：

- `extract591Data()` - 591 租屋網的擷取邏輯
- `extractSinyiData()` - 信義房屋的擷取邏輯
- `extractYungchingData()` - 永慶房仲的擷取邏輯

### 新增支援的網站

1. 在 `manifest.json` 的 `host_permissions` 和 `content_scripts.matches` 中新增網站網址
2. 在 `popup.js` 的 `extractPropertyData()` 函數中新增判斷邏輯
3. 實作對應的資料擷取函數

## 注意事項

⚠️ **重要提醒**

- 本擴充功能僅供個人使用，請勿用於商業用途
- 使用時請遵守各租屋網站的使用條款
- 建議適度使用，避免頻繁擷取造成網站負擔
- 網站結構可能隨時變動，導致擷取功能失效
- 請確保您的租賃物件聚合平台已正確部署並可訪問

## 常見問題

### Q: 擷取資料時顯示「無法連接到伺服器」？

A: 請檢查：
1. API 網址是否正確設定
2. 租賃物件聚合平台是否正常運行
3. 網路連線是否正常
4. 瀏覽器是否封鎖跨域請求（CORS）

### Q: 擷取的資料不完整？

A: 可能原因：
1. 網站結構已變更，需要更新擷取邏輯
2. 該物件頁面缺少某些資訊
3. 網站使用動態載入，需要等待頁面完全載入

### Q: 如何更新擴充功能？

A: 
1. 修改程式碼後
2. 前往 `chrome://extensions/`
3. 點擊擴充功能卡片上的「重新載入」按鈕

## 授權

本擴充功能採用 MIT 授權條款。

## 聯絡方式

如有問題或建議，請透過 GitHub Issues 回報。

